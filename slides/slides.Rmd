# Step by step
- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MDkwLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDk5NCwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgLXZcclxuLS0tXHJcbiJdClsxLjYyMzc2MywgIm8iLCAibmV4dGZsb3cgdmVyc2lvbiAyMC4xMC4wLjU0MzBcclxuIl0KWzEuNjU4MTIxLCAibyIsICItLS1cclxuIl0K'></asciinema-player>

- - -

## Step 1 - Operate on a _stream_

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=1 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MDkyLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDUwNywgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxXHJcbi0tLVxyXG4iXQpbMi4yMzE4MzUsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjQ5NTUxOSwgIm8iLCAiTGF1bmNoaW5nIGAuL21haW4ubmZgIFthd2Vzb21lX21ldWNjaV0gLSByZXZpc2lvbjogNGZmMDc3NzZlMFxyXG4iXQpbNC4wODg5NjMsICJvIiwgIlx1MDAxYlszM21XQVJOOiBEU0wgMiBJUyBBTiBFWFBFUklNRU5UQUwgRkVBVFVSRSBVTkRFUiBERVZFTE9QTUVOVCAtLSBTWU5UQVggTUFZIENIQU5HRSBJTiBGVVRVUkUgUkVMRUFTRVx1MDAxYlszOW1cdTAwMWJbS1xyXG4iXQpbNi4wNzY0MjIsICJvIiwgIjJcclxuIl0KWzYuNTMwNzg1LCAibyIsICItLS1cclxuIl0K'></asciinema-player>

- - -

## Step 2 - Operate on a stream in parallel

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=2 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MDk5LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMTQ2OSwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAyXHJcbi0tLVxyXG4iXQpbMi4yMTg5NzMsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjM1NTI2NCwgIm8iLCAiTGF1bmNoaW5nIGAuL21haW4ubmZgIFtzaWxseV9oYXdraW5nXSAtIHJldmlzaW9uOiA0ZmYwNzc3NmUwXHJcbiJdClszLjg2NTgwOCwgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls1Ljk1OTE5MiwgIm8iLCAiMlxyXG4iXQpbNS45NTk0MywgIm8iLCAiM1xyXG40XHJcbiJdCls2LjMzMzg4NiwgIm8iLCAiLS0tXHJcbiJdCg=='></asciinema-player>

- - -

## Step 3 - Operate on a stream using a `process`

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=3 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTA2LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMTU1OCwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAzXHJcbi0tLVxyXG4iXQpbMi4zNzQ5ODUsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wIl0KWzIuMzc1MjksICJvIiwgIlxyXG4iXQpbMy41MTc3MTgsICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBbZXh0cmF2YWdhbnRfbWVzdG9yZl0gLSByZXZpc2lvbjogNGZmMDc3NzZlMFxyXG4iXQpbNC4xMTY2NjcsICJvIiwgIlx1MDAxYlszM21XQVJOOiBEU0wgMiBJUyBBTiBFWFBFUklNRU5UQUwgRkVBVFVSRSBVTkRFUiBERVZFTE9QTUVOVCAtLSBTWU5UQVggTUFZIENIQU5HRSBJTiBGVVRVUkUgUkVMRUFTRVx1MDAxYlszOW1cdTAwMWJbS1xyXG4iXQpbNi41MjU1MywgIm8iLCAiWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAzOmFkZCBbICAwJV0gMCBvZiAyXHUwMDFiW0tcclxuIl0KWzYuNzMxMDM1LCAibyIsICJcdTAwMWJbMkFcclxuIl0KWzYuNzMzNjAyLCAibyIsICJleGVjdXRvciA+ICBsb2NhbCAoMylcdTAwMWJbS1xyXG4iXQpbNi43MzM3OTgsICJvIiwgIltlMC9iODMyZDldIHByb2Nlc3MgPiBzdGVwMzphZGQgKDEpIFsxMDAlXSAzIG9mIDMg4pyUXHUwMDFiW0tcclxuM1x1MDAxYltLXHJcbjRcdTAwMWJbS1xyXG4yXHUwMDFiW0tcclxuIl0KWzYuOTM3MDI1LCAibyIsICJcdTAwMWJbNkFcclxuIl0KWzYuOTM3NTIxLCAibyIsICJleGVjdXRvciA+ICBsb2NhbCAoMylcdTAwMWJbS1xyXG5bZTAvYjgzMmQ5XSBwcm9jZXNzID4gc3RlcDM6YWRkICgxKSBbMTAwJV0gMyBvZiAzIOKclFx1MDAxYltLXHJcbjNcdTAwMWJbS1xyXG40XHUwMDFiW0tcclxuMlx1MDAxYltLXHJcbiJdCls3LjA2MTA2NiwgIm8iLCAiXHJcbiJdCls3LjE1MjQ0MiwgIm8iLCAiLS0tXHJcbiJdCg=='></asciinema-player>

- - -

## Step 4 - How `map` is synchronous

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=4 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTEzLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDY1LCAibyIsICJSdW5uaW5nOiBuZXh0ZmxvdyBydW4gLiAtZW50cnkgc3RlcDRcclxuLS0tXHJcbiJdClsyLjIzNzUzNSwgIm8iLCAiTiBFIFggVCBGIEwgTyBXICB+ICB2ZXJzaW9uIDIwLjEwLjAiXQpbMi4yMzc4NCwgIm8iLCAiXHJcbiJdClszLjQxODU2MywgIm8iLCAiTGF1bmNoaW5nIGAuL21haW4ubmZgIFtzcGVjaWFsX2dvbGlja10gLSByZXZpc2lvbjogNGZmMDc3NzZlMFxyXG4iXQpbMy45NTA1NjYsICJvIiwgIlx1MDAxYlszM21XQVJOOiBEU0wgMiBJUyBBTiBFWFBFUklNRU5UQUwgRkVBVFVSRSBVTkRFUiBERVZFTE9QTUVOVCAtLSBTWU5UQVggTUFZIENIQU5HRSBJTiBGVVRVUkUgUkVMRUFTRVx1MDAxYlszOW1cdTAwMWJbS1xyXG4iXQpbNS44ODU3NTIsICJvIiwgIjJcclxuIl0KWzcuODg5NDgsICJvIiwgIjNcclxuIl0KWzcuODg5NzE0LCAibyIsICI0XHJcbiJdCls4LjE5NjU2MSwgIm8iLCAiLS0tXHJcbiJdCg=='></asciinema-player>

- - -

## Step 5 - Introduce an `ID`

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=5 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTIxLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxNDEyMSwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXA1XHJcbi0tLVxyXG4iXQpbMi4xNzkzNDYsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjI3ODE2MiwgIm8iLCAiTGF1bmNoaW5nIGAuL21haW4ubmZgIFtmdXJpb3VzX3J1YmVuc10gLSByZXZpc2lvbjogNGZmMDc3NzZlMFxyXG4iXQpbMy43NjkxNjEsICJvIiwgIlx1MDAxYlszM21XQVJOOiBEU0wgMiBJUyBBTiBFWFBFUklNRU5UQUwgRkVBVFVSRSBVTkRFUiBERVZFTE9QTUVOVCAtLSBTWU5UQVggTUFZIENIQU5HRSBJTiBGVVRVUkUgUkVMRUFTRVx1MDAxYlszOW1cdTAwMWJbS1xyXG4iXQpbNS45NTM4OTYsICJvIiwgIlstICAgICAgICBdIHByb2Nlc3MgPiBzdGVwNTphZGRUdXBsZSAtXHUwMDFiW0tcclxuIl0KWzYuMTU1MTQ4LCAibyIsICJcdTAwMWJbMkFcclxuIl0KWzYuMTU3NDMsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcblszOS8xMzg1NzBdIHByb2Nlc3MgPiBzdGVwNTphZGRUdXBsZSAoMikgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG5bMywgNF1cdTAwMWJbS1xyXG4iXQpbNi4xNTc2MjksICJvIiwgIlsxLCAyXVx1MDAxYltLXHJcblsyLCAzXVx1MDAxYltLXHJcbiJdCls2LjM2MjQyOCwgIm8iLCAiXHUwMDFiWzZBXHJcbiJdCls2LjM2MjgxMywgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDMpXHUwMDFiW0tcclxuWzM5LzEzODU3MF0gcHJvY2VzcyA+IHN0ZXA1OmFkZFR1cGxlICgyKSBbMTAwJV0gMyBvZiAzIOKclFx1MDAxYltLXHJcblszLCA0XVx1MDAxYltLXHJcblsxLCAyXVx1MDAxYltLXHJcblsyLCAzXVx1MDAxYltLXHJcbiJdCls2LjUwMjI4NiwgIm8iLCAiXHJcbiJdCls2LjY1Nzc5NSwgIm8iLCAiLS0tXHJcbiJdCg=='></asciinema-player>

- - -

## Step 6 - Add a process parameter

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=6 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTI4LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDU5MywgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXA2XHJcbi0tLVxyXG4iXQpbMi4yMTMwMTUsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjMwOTMzLCAibyIsICJMYXVuY2hpbmcgYC4vbWFpbi5uZmAgW3N1c3BpY2lvdXNfbWluc2t5XSAtIHJldmlzaW9uOiA0ZmYwNzc3NmUwXHJcbiJdClszLjgyMDg2NSwgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls2LjIxMTcyMSwgIm8iLCAiWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXA2OmFkZFR1cGxlV2l0aFBhcmFtZXRlciAtXHUwMDFiW0tcclxuIl0KWzYuNDEyOTcsICJvIiwgIlx1MDAxYlsyQVxyXG4iXQpbNi40MTUzMjEsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcbiJdCls2LjQxNTY1NiwgIm8iLCAiWzA2LzM1MzBiN10gcHJvY2VzcyA+IHN0ZXA2OmFkZFR1cGxlV2l0aFBhcmFtZXRlciAoMykgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG5bMiwgMTJdXHUwMDFiW0tcclxuWzEsIDExXVx1MDAxYltLXHJcblszLCAxM11cdTAwMWJbS1xyXG4iXQpbNi42MTk3ODEsICJvIiwgIlx1MDAxYls2QVxyXG4iXQpbNi42MjAxMjQsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcblswNi8zNTMwYjddIHByb2Nlc3MgPiBzdGVwNjphZGRUdXBsZVdpdGhQYXJhbWV0ZXIgKDMpIFsxMDAlXSAzIG9mIDMg4pyUXHUwMDFiW0tcclxuWzIsIDEyXVx1MDAxYltLXHJcblsxLCAxMV1cdTAwMWJbS1xyXG5bMywgMTNdXHUwMDFiW0tcclxuIl0KWzYuNzYwNzg4LCAibyIsICJcclxuIl0KWzYuODUzNDQ5LCAibyIsICItLS1cclxuIl0K'></asciinema-player>

- - -

## Step 7 - Use a `Map` to store parameters

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=7 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTM1LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDU3MSwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXA3XHJcbi0tLVxyXG4iXQpbMi4yNDQwMDEsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjM3ODA5OCwgIm8iLCAiTGF1bmNoaW5nIGAuL21haW4ubmZgIFtuYXVzZW91c19saXNrb3ZdIC0gcmV2aXNpb246IDRmZjA3Nzc2ZTBcclxuIl0KWzMuODg2Mzg5LCAibyIsICJcdTAwMWJbMzNtV0FSTjogRFNMIDIgSVMgQU4gRVhQRVJJTUVOVEFMIEZFQVRVUkUgVU5ERVIgREVWRUxPUE1FTlQgLS0gU1lOVEFYIE1BWSBDSEFOR0UgSU4gRlVUVVJFIFJFTEVBU0VcdTAwMWJbMzltXHUwMDFiW0tcclxuIl0KWzYuMjMyNzc3LCAibyIsICJbLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDc6YWRkVHVwbGVXaXRoTWFwIC1cdTAwMWJbS1xyXG4iXQpbNi40MzY1ODUsICJvIiwgIlx1MDAxYlsyQVxyXG4iXQpbNi40MzkwNzIsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcbiJdCls2LjQzOTMwMywgIm8iLCAiW2FiLzgzZmI0NF0gcHJvY2VzcyA+IHN0ZXA3OmFkZFR1cGxlV2l0aE1hcCAoMykgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG5bMiwgLThdXHUwMDFiW0tcclxuWzEsIC05XVx1MDAxYltLXHJcblszLCAtN11cdTAwMWJbS1xyXG4iXQpbNi41ODUzMTEsICJvIiwgIlxyXG4iXQpbNi43MzAwNDMsICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -

## Step 8 - Use a `Map` with a process-key

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=8 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTQyLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDU5NywgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXA4XHJcbi0tLVxyXG4iXQpbMi4zMDc3NzcsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjQ1Mjg3NywgIm8iLCAiTGF1bmNoaW5nIGAuL21haW4ubmZgIFtodW5ncnlfa29jaF0gLSByZXZpc2lvbjogNGZmMDc3NzZlMFxyXG4iXQpbMy45NzM1MDQsICJvIiwgIlx1MDAxYlszM21XQVJOOiBEU0wgMiBJUyBBTiBFWFBFUklNRU5UQUwgRkVBVFVSRSBVTkRFUiBERVZFTE9QTUVOVCAtLSBTWU5UQVggTUFZIENIQU5HRSBJTiBGVVRVUkUgUkVMRUFTRVx1MDAxYlszOW1cdTAwMWJbS1xyXG4iXQpbNi4yNTk0NjIsICJvIiwgIlstICAgICAgICBdIHByb2Nlc3MgPiBzdGVwODphZGRUdXBsZVdpdGhQcm9jZXNzSGFzaCAtXHUwMDFiW0tcclxuIl0KWzYuNDYzNjk3LCAibyIsICJcdTAwMWJbMkFcclxuIl0KWzYuNDY2MTE3LCAibyIsICJleGVjdXRvciA+ICBsb2NhbCAoMylcdTAwMWJbS1xyXG5bNmIvM2JmZGQ2XSBwcm9jZXNzID4gc3RlcDg6YWRkVHVwbGVXaXRoUHJvY2Vzc0hhc2ggKDEpIFsgIDAlXSAwIG9mIDNcdTAwMWJbS1xyXG4iXQpbNi42NzA2MDIsICJvIiwgIlx1MDAxYlszQVxyXG4iXQpbNi42NzMxOTUsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcbls2Yi8zYmZkZDZdIHByb2Nlc3MgPiBzdGVwODphZGRUdXBsZVdpdGhQcm9jZXNzSGFzaCAoMSkgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG5bMywgLTddXHUwMDFiW0tcclxuWzIsIC04XVx1MDAxYltLXHJcblsxLCAtOV1cdTAwMWJbS1xyXG4iXQpbNi44MDk0ODgsICJvIiwgIlxyXG4iXQpbNi45MjkxMzksICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -

## Step 9 - Use a `ConfigMap` with a shell script

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=9 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTUwLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDU5OSwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXA5XHJcbi0tLVxyXG4iXQpbMi4yNDE5NzQsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjMzNjI1LCAibyIsICJMYXVuY2hpbmcgYC4vbWFpbi5uZmAgW2VsYXRlZF9ib290aF0gLSByZXZpc2lvbjogNGZmMDc3NzZlMFxyXG4iXQpbMy44Mzg3MDMsICJvIiwgIlx1MDAxYlszM21XQVJOOiBEU0wgMiBJUyBBTiBFWFBFUklNRU5UQUwgRkVBVFVSRSBVTkRFUiBERVZFTE9QTUVOVCAtLSBTWU5UQVggTUFZIENIQU5HRSBJTiBGVVRVUkUgUkVMRUFTRVx1MDAxYlszOW1cdTAwMWJbS1xyXG4iXQpbNi4wMzU0NzEsICJvIiwgIlstICAgICAgICBdIHByb2Nlc3MgPiBzdGVwOTphZGRUdXBsZVdpdGhQcm9jZXNzSGFzaFNjcmlwdCAtXHUwMDFiW0tcclxuIl0KWzYuMjQwODEzLCAibyIsICJcdTAwMWJbMkFcclxuIl0KWzYuMjQzODUzLCAibyIsICJleGVjdXRvciA+ICBsb2NhbCAoMylcdTAwMWJbS1xyXG4iXQpbNi4yNDQxODEsICJvIiwgIlsyMC84NDk1NzZdIHByb2Nlc3MgPiBzdGVwOTphZGRUdXBsZVdpdGhQcm9jZXNzSGFzaFNjcmlwdCAoMSkgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG5bMywgLTdcdTAwMWJbS1xyXG5dXHUwMDFiW0tcclxuWzIsIC04XHUwMDFiW0tcclxuXVx1MDAxYltLXHJcblsxLCAtOVx1MDAxYltLXHJcbl1cdTAwMWJbS1xyXG4iXQpbNi40NDkxNzcsICJvIiwgIlx1MDAxYls5QVxyXG4iXQpbNi40NDk2MSwgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDMpXHUwMDFiW0tcclxuWzIwLzg0OTU3Nl0gcHJvY2VzcyA+IHN0ZXA5OmFkZFR1cGxlV2l0aFByb2Nlc3NIYXNoU2NyaXB0ICgxKSBbMTAwJV0gMyBvZiAzIOKclFx1MDAxYltLXHJcblszLCAtN1x1MDAxYltLXHJcbl1cdTAwMWJbS1xyXG5bMiwgLThcdTAwMWJbS1xyXG5dXHUwMDFiW0tcclxuWzEsIC05XHUwMDFiW0tcclxuXVx1MDAxYltLXHJcbiJdCls2LjU4MzM2OCwgIm8iLCAiXHJcbiJdCls2LjcxMjkyLCAibyIsICItLS1cclxuIl0K'></asciinema-player>

- - -

## Step 10 - Running a _pipeline_

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=10 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTU3LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDg3NiwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxMFxyXG4tLS1cclxuIl0KWzIuMTk4NTk0LCAibyIsICJOIEUgWCBUIEYgTCBPIFcgIH4gIHZlcnNpb24gMjAuMTAuMFxyXG4iXQpbMy4yOTM5NDUsICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBbbWlnaHR5X2FsYmF0dGFuaV0gLSByZXZpc2lvbjogNGZmMDc3NzZlMFxyXG4iXQpbMy44Mjk0MiwgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls2LjExNDU1MywgIm8iLCAiWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAxMDpwcm9jZXNzX3N0ZXAxMGEgLVx1MDAxYltLXHJcblstICAgICAgICBdIHByb2Nlc3MgPiBzdGVwMTA6cHJvY2Vzc19zdGVwMTBiIC1cdTAwMWJbS1xyXG4iXQpbNi4zMTcxNTEsICJvIiwgIlx1MDAxYlszQVxyXG4iXQpbNi4zMTc2MjUsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcbiJdCls2LjMxNzg0NywgIm8iLCAiWzU5LzMwMDFlZV0gcHJvY2VzcyA+IHN0ZXAxMDpwcm9jZXNzX3N0ZXAxMGEgKDMpIFsgIDAlXSAwIG9mIDNcdTAwMWJbS1xyXG5bLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDEwOnByb2Nlc3Nfc3RlcDEwYiAgICAgLVx1MDAxYltLXHJcbiJdCls2LjUyMDYxMiwgIm8iLCAiXHUwMDFiWzRBXHJcbiJdCls2LjUyMjYwNCwgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDYpXHUwMDFiW0tcclxuWzU5LzMwMDFlZV0gcHJvY2VzcyA+IHN0ZXAxMDpwcm9jZXNzX3N0ZXAxMGEgKDMpIFsxMDAlXSAzIG9mIDMg4pyUXHUwMDFiW0tcclxuWzBjLzlmYWQwYl0gcHJvY2VzcyA+IHN0ZXAxMDpwcm9jZXNzX3N0ZXAxMGIgKDMpIFsxMDAlXSAzIG9mIDMg4pyUXHUwMDFiW0tcclxuWzIsIDIsIDEwXVx1MDAxYltLXHJcblsxLCAxLCAxMF1cdTAwMWJbS1xyXG5bMywgMywgMTBdXHUwMDFiW0tcclxuIl0KWzYuNjY0MDYyLCAibyIsICJcclxuIl0KWzYuODI4NTksICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=10a -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTY0LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMTU4MSwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxMGFcclxuLS0tXHJcbiJdClsyLjI5MzAwNCwgIm8iLCAiTiBFIFggVCBGIEwgTyBXICB+ICB2ZXJzaW9uIDIwLjEwLjBcclxuIl0KWzMuMzk2MjE5LCAibyIsICJMYXVuY2hpbmcgYC4vbWFpbi5uZmAgW21hbmlhY19iYWJiYWdlXSAtIHJldmlzaW9uOiA0ZmYwNzc3NmUwXHJcbiJdClszLjkyNzYxOCwgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls2LjIyNjU2OSwgIm8iLCAiWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAxMGE6cHJvY2Vzc19zdGVwMTBhIC1cdTAwMWJbS1xyXG5bLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDEwYTpwcm9jZXNzX3N0ZXAxMGIgLVx1MDAxYltLXHJcbiJdCls2LjYzMjUyOSwgIm8iLCAiXHUwMDFiWzNBXHJcbiJdCls2LjYzNTQ4NiwgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDYpXHUwMDFiW0tcclxuIl0KWzYuNjM1OCwgIm8iLCAiW2EyLzcyYzk3Ml0gcHJvY2VzcyA+IHN0ZXAxMGE6cHJvY2Vzc19zdGVwMTBhICgzKSBbMTAwJV0gMyBvZiAzIOKclFx1MDAxYltLXHJcbltiMC9iMzY5MWVdIHByb2Nlc3MgPiBzdGVwMTBhOnByb2Nlc3Nfc3RlcDEwYiAoMykgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG5bMiwgNywgNV1cdTAwMWJbS1xyXG5bMSwgNiwgNV1cdTAwMWJbS1xyXG5bMywgOCwgNV1cdTAwMWJbS1xyXG4iXQpbNi43OTM5MjksICJvIiwgIlxyXG4iXQpbNi44OTU0NDQsICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -


```groovy
  ...
  | map{ x -> [ x[0], x[1], 5 ] } \
  ...
```


```groovy
  ...
  | map{ id, value, term -> [ id, value, 5 ] } \
  ...
```

## Step 11 - A more generic process

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=11 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTcxLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDkzNSwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxMVxyXG4tLS1cclxuIl0KWzIuNDcxNjY2LCAibyIsICJOIEUgWCBUIEYgTCBPIFcgIH4gIHZlcnNpb24gMjAuMTAuMCJdClsyLjQ3MTk0LCAibyIsICJcclxuIl0KWzMuNjY2OTQsICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBbbG9uZWx5X21vcnNlXSAtIHJldmlzaW9uOiA0ZmYwNzc3NmUwXHJcbiJdCls0LjE3MzczNiwgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls2LjEzOTM5OSwgIm8iLCAiYXNzZXJ0IHByb2Nlc3NDb25maWc9PW51bGxcclxuICAgICAgIHxcclxuIl0KWzYuMTM5NjM3LCAibyIsICIgICAgICAgWydlY2hvJzpmYWxzZSwgJ2NhY2hlYWJsZSc6dHJ1ZSwgJ3NoZWxsJzpbJy9iaW4vYmFzaCcsICctdWUnXSwgJ3ZhbGlkRXhpdFN0YXR1cyc6WzBdLCAnbWF4UmV0cmllcyc6MCwgJ21heEVycm9ycyc6LTEsICdlcnJvclN0cmF0ZWd5JzpURVJNSU5BVEVdXHJcblxyXG4gLS0gQ2hlY2sgc2NyaXB0ICdtYWluLm5mJyBhdCBsaW5lOiAyNDggb3Igc2VlICcubmV4dGZsb3cubG9nJyBmaWxlIGZvciBtb3JlIGRldGFpbHNcclxuIl0KWzYuMjA5MzU4LCAibyIsICItLS1cclxuIl0K'></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTc3LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDExNCwgIm8iLCAiUnVubmluZzogY2F0IGV4YW1wbGVzL21vZHVsZXMvc3RlcDExLm5mXHJcbi0tLVxyXG4iXQpbMC4wMTI3MjMsICJvIiwgInByb2Nlc3MgcHJvY2Vzc19zdGVwMTEge1xyXG4gIGlucHV0OlxyXG4gICAgdHVwbGUgdmFsKGlkKSwgdmFsKGlucHV0KSwgdmFsKGNvbmZpZylcclxuICBvdXRwdXQ6XHJcbiAgICB0dXBsZSB2YWwoXCIke2lkfVwiKSwgdmFsKG91dHB1dCksIHZhbChcIiR7Y29uZmlnfVwiKVxyXG4gIGV4ZWM6XHJcbiAgICBpZiAoY29uZmlnLm9wZXJhdG9yID09IFwiK1wiKVxyXG4gICAgICBvdXRwdXQgPSBpbnB1dC50b0ludGVnZXIoKSArIGNvbmZpZy50ZXJtLnRvSW50ZWdlcigpXHJcbiAgICBlbHNlXHJcbiAgICAgIG91dHB1dCA9IGlucHV0LnRvSW50ZWdlcigpIC0gY29uZmlnLnRlcm0udG9JbnRlZ2VyKClcclxufVxyXG4iXQpbMC4wMTMyODQsICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=11a -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTc4LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDY1LCAibyIsICJSdW5uaW5nOiBuZXh0ZmxvdyBydW4gLiAtZW50cnkgc3RlcDExYVxyXG4tLS1cclxuIl0KWzIuMjM2OTg2LCAibyIsICJOIEUgWCBUIEYgTCBPIFcgIH4gIHZlcnNpb24gMjAuMTAuMFxyXG4iXQpbMy4zNzA2MzIsICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBbZ3JhdmVfc3RhbGxtYW5dIC0gcmV2aXNpb246IDRmZjA3Nzc2ZTBcclxuIl0KWzMuOTIzNDQsICJvIiwgIlx1MDAxYlszM21XQVJOOiBEU0wgMiBJUyBBTiBFWFBFUklNRU5UQUwgRkVBVFVSRSBVTkRFUiBERVZFTE9QTUVOVCAtLSBTWU5UQVggTUFZIENIQU5HRSBJTiBGVVRVUkUgUkVMRUFTRVx1MDAxYlszOW1cdTAwMWJbS1xyXG4iXQpbNi4yMjUwOTQsICJvIiwgIlstICAgICAgICBdIHByb2Nlc3MgPiBzdGVwMTFhOnByb2Nlc3Nfc3RlcDExYSAtXHUwMDFiW0tcclxuWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAxMWE6cHJvY2Vzc19zdGVwMTFiIC1cdTAwMWJbS1xyXG4iXQpbNi40MzAwMTgsICJvIiwgIlx1MDAxYlszQVxyXG4iXQpbNi40MzIyNDMsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICg2KVx1MDAxYltLXHJcblthYS9lMTVkYTddIHByb2Nlc3MgPiBzdGVwMTFhOnByb2Nlc3Nfc3RlcDExYSAoMSkgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG4iXQpbNi40MzI0ODUsICJvIiwgIls0MS8xZTY0MjZdIHByb2Nlc3MgPiBzdGVwMTFhOnByb2Nlc3Nfc3RlcDExYiAoMykgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG5bMiwgLTRdXHUwMDFiW0tcclxuWzMsIC0zXVx1MDAxYltLXHJcblsxLCAtNV1cdTAwMWJbS1xyXG4iXQpbNi41Nzk2ODYsICJvIiwgIlxyXG4iXQpbNi43MzgyNzQsICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -

## Step 12 - Map/reduce in NextFlow

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=12 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTg1LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDQ1NiwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxMlxyXG4tLS1cclxuIl0KWzIuMjYxODYzLCAibyIsICJOIEUgWCBUIEYgTCBPIFcgIH4gIHZlcnNpb24gMjAuMTAuMFxyXG4iXQpbMy4zNjA2NCwgIm8iLCAiTGF1bmNoaW5nIGAuL21haW4ubmZgIFtmZXN0ZXJpbmdfbWF5ZXJdIC0gcmV2aXNpb246IDRmZjA3Nzc2ZTBcclxuIl0KWzMuODgxNDU5LCAibyIsICJcdTAwMWJbMzNtV0FSTjogRFNMIDIgSVMgQU4gRVhQRVJJTUVOVEFMIEZFQVRVUkUgVU5ERVIgREVWRUxPUE1FTlQgLS0gU1lOVEFYIE1BWSBDSEFOR0UgSU4gRlVUVVJFIFJFTEVBU0VcdTAwMWJbMzltXHUwMDFiW0tcclxuIl0KWzYuMDY1MjgxLCAibyIsICJbLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDEyOnByb2Nlc3Nfc3RlcDEwYSAtXHUwMDFiW0tcclxuWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAxMjpwcm9jZXNzX3N0ZXAxMiAgLVx1MDAxYltLXHJcbiJdCls2LjI3MDg4OCwgIm8iLCAiXHUwMDFiWzNBXHJcbiJdCls2LjI3MzE3NCwgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDQpXHUwMDFiW0tcclxuIl0KWzYuMjczNDM5LCAibyIsICJbM2EvYWY1MGQ3XSBwcm9jZXNzID4gc3RlcDEyOnByb2Nlc3Nfc3RlcDEwYSAoMSkgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG5bNzkvYjlkYTc0XSBwcm9jZXNzID4gc3RlcDEyOnByb2Nlc3Nfc3RlcDEyICAgICAgWzEwMCVdIDEgb2YgMSDinJRcdTAwMWJbS1xyXG5bc3VtLCAzNl1cdTAwMWJbS1xyXG4iXQpbNi40MTk3OTgsICJvIiwgIlxyXG4iXQpbNi41NDIxMjQsICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -

## Step 13 - Files as input/output

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=13 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTkxLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDU2NSwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxMyAtLWlucHV0IGRhdGEvaW5wdXQxLnR4dFxyXG4tLS1cclxuIl0KWzIuMjA0NjQ4LCAibyIsICJOIEUgWCBUIEYgTCBPIFcgIH4gIHZlcnNpb24gMjAuMTAuMFxyXG4iXQpbMy4yNzcyMDIsICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBbZGVzcGVyYXRlX2dhbGlsZW9dIC0gcmV2aXNpb246IDRmZjA3Nzc2ZTBcclxuIl0KWzMuODAwNzQ4LCAibyIsICJcdTAwMWJbMzNtV0FSTjogRFNMIDIgSVMgQU4gRVhQRVJJTUVOVEFMIEZFQVRVUkUgVU5ERVIgREVWRUxPUE1FTlQgLS0gU1lOVEFYIE1BWSBDSEFOR0UgSU4gRlVUVVJFIFJFTEVBU0VcdTAwMWJbMzltXHUwMDFiW0tcclxuIl0KWzYuMTc5MDE5LCAibyIsICJbLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDEzOnByb2Nlc3Nfc3RlcDEzIFsgIDAlXSAwIG9mIDFcdTAwMWJbS1xyXG4iXQpbNi4zODI0MDUsICJvIiwgIlx1MDAxYlsyQVxyXG4iXQpbNi4zODQyOTEsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgxKVx1MDAxYltLXHJcbiJdCls2LjM4NDM3OSwgIm8iLCAiW2Y4LzU5ZDM0Ml0gcHJvY2VzcyA+IHN0ZXAxMzpwcm9jZXNzX3N0ZXAxMyAoMSkgWzEwMCVdIDEgb2YgMSDinJRcdTAwMWJbS1xyXG5baW5wdXQxLCA8Li4uPi93b3JrL2Y4LzU5ZDM0MmY0NGVlNTlmZWI3MWQ4YTk3MzlhNjA1My9vdXRwdXQudHh0XVx1MDAxYltLXHJcbiJdCls2LjUwNDY2MywgIm8iLCAiXHJcbiJdCls2LjU4ODgwNSwgIm8iLCAiLS0tXHJcbiJdCg=='></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MTk4LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19Cls0Ljk0MDcyNCwgIm8iLCAiUnVubmluZzogY2F0IDwuLi4+L3dvcmsvZjgvNTlkMzQyZjQ0ZWU1OWZlYjcxZDhhOTczOWE2MDUzL291dHB1dC50eHRcclxuLS0tXHJcbiJdCls5Ljk1ODIxNywgIm8iLCAiMTFcclxuIl0KWzkuOTU4NDI3LCAibyIsICItLS1cclxuIl0K'></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjA4LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDg2NiwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxMyAtLWlucHV0IGRhdGEvaW5wdXQ/LnR4dFxyXG4tLS1cclxuIl0KWzIuMTgwMjI1LCAibyIsICJOIEUgWCBUIEYgTCBPIFcgIH4gIHZlcnNpb24gMjAuMTAuMFxyXG4iXQpbMy4yNTU4OTUsICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBba2lja2Fzc19wZXJsbWFuXSAtIHJldmlzaW9uOiA0ZmYwNzc3NmUwXHJcbiJdClszLjc3ODEyMSwgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls1Ljk2MTIxNSwgIm8iLCAiWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAxMzpwcm9jZXNzX3N0ZXAxMyAtXHUwMDFiW0tcclxuIl0KWzYuMTY1ODIsICJvIiwgIlx1MDAxYlsyQVxyXG4iXQpbNi4xNjc5MjMsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcbiJdCls2LjE2ODIwOSwgIm8iLCAiW2JkLzdlZTA3ZV0gcHJvY2VzcyA+IHN0ZXAxMzpwcm9jZXNzX3N0ZXAxMyAoMSkgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG5baW5wdXQyLCA8Li4uPi93b3JrL2U4Lzc2MzQ4YjE1ZTVjOTI3OTVhY2VkZDMzODczMTU3My9vdXRwdXQudHh0XVx1MDAxYltLXHJcbltpbnB1dDMsIDwuLi4+L3dvcmsvNzcvYWIwMGYzMTcyMjIwNjVkZGQ2Y2U3YTJiNzRjZmRlL291dHB1dC50eHRdXHUwMDFiW0tcclxuW2lucHV0MSwgPC4uLj4vd29yay9iZC83ZWUwN2U4ZDZjNTI0ODFlZGE0ZjA3Yjc0NmU1OTEvb3V0cHV0LnR4dF1cdTAwMWJbS1xyXG4iXQpbNi4zNzM2NjEsICJvIiwgIlx1MDAxYls2QVxyXG4iXQpbNi4zNzM5MjgsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcbltiZC83ZWUwN2VdIHByb2Nlc3MgPiBzdGVwMTM6cHJvY2Vzc19zdGVwMTMgKDEpIFsxMDAlXSAzIG9mIDMg4pyUXHUwMDFiW0tcclxuW2lucHV0MiwgPC4uLj4vd29yay9lOC83NjM0OGIxNWU1YzkyNzk1YWNlZGQzMzg3MzE1NzMvb3V0cHV0LnR4dF1cdTAwMWJbS1xyXG4iXQpbNi4zNzQwOTEsICJvIiwgIltpbnB1dDMsIDwuLi4+L3dvcmsvNzcvYWIwMGYzMTcyMjIwNjVkZGQ2Y2U3YTJiNzRjZmRlL291dHB1dC50eHRdXHUwMDFiW0tcclxuW2lucHV0MSwgPC4uLj4vd29yay9iZC83ZWUwN2U4ZDZjNTI0ODFlZGE0ZjA3Yjc0NmU1OTEvb3V0cHV0LnR4dF1cdTAwMWJbS1xyXG4iXQpbNi40OTA5NzMsICJvIiwgIlxyXG4iXQpbNi42MzY0MDksICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjE1LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClsyLjE1NTM4NywgIm8iLCAiLS0tXHJcbiJdCls3LjE0NTkwOSwgIm8iLCAiPC4uLj4vd29yay83Ny9hYjAwZjMxNzIyMjA2NWRkZDZjZTdhMmI3NGNmZGU6XHJcbiJdCls3LjE0NTk3NywgIm8iLCAiaW5wdXQzLnR4dFx0b3V0cHV0LnR4dFxyXG5cclxuPC4uLj4vd29yay9iZC83ZWUwN2U4ZDZjNTI0ODFlZGE0ZjA3Yjc0NmU1OTE6XHJcbiJdCls3LjE0NjE3MSwgIm8iLCAiaW5wdXQxLnR4dFx0b3V0cHV0LnR4dFxyXG5cclxuPC4uLj4vd29yay9lOC83NjM0OGIxNWU1YzkyNzk1YWNlZGQzMzg3MzE1NzM6XHJcbmlucHV0Mi50eHRcdG91dHB1dC50eHRcclxuIl0KWzcuMTQ2NzA5LCAibyIsICItLS1cclxuIl0K'></asciinema-player>

- - -

## Step 14 - _Publishing_ output

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=14 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjIzLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDU2NCwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxNCAtLWlucHV0IGRhdGEvaW5wdXQxLnR4dFxyXG4tLS1cclxuIl0KWzIuMjAzNTU2LCAibyIsICJOIEUgWCBUIEYgTCBPIFcgIH4gIHZlcnNpb24gMjAuMTAuMFxyXG4iXQpbMy4yODczOTgsICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBbc2hhcnBfaGFtaWx0b25dIC0gcmV2aXNpb246IDRmZjA3Nzc2ZTBcclxuIl0KWzMuODExMjUsICJvIiwgIlx1MDAxYlszM21XQVJOOiBEU0wgMiBJUyBBTiBFWFBFUklNRU5UQUwgRkVBVFVSRSBVTkRFUiBERVZFTE9QTUVOVCAtLSBTWU5UQVggTUFZIENIQU5HRSBJTiBGVVRVUkUgUkVMRUFTRVx1MDAxYlszOW1cdTAwMWJbS1xyXG4iXQpbNS45ODAyOTksICJvIiwgIlstICAgICAgICBdIHByb2Nlc3MgPiBzdGVwMTQ6cHJvY2Vzc19zdGVwMTQgLVx1MDAxYltLXHJcbiJdCls2LjE4NTUwOCwgIm8iLCAiXHUwMDFiWzJBXHJcbiJdCls2LjE4Nzc5MiwgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDEpXHUwMDFiW0tcclxuWzJmL2IyM2ZlNl0gcHJvY2VzcyA+IHN0ZXAxNDpwcm9jZXNzX3N0ZXAxNCAoMSkgWzEwMCVdIDEgb2YgMSDinJRcdTAwMWJbS1xyXG4iXQpbNi4xODgwNjYsICJvIiwgIltpbnB1dDEsIDwuLi4+L3dvcmsvMmYvYjIzZmU2N2UwZDU1YjczYWI1OWMyMGNlNDEzMDY2L291dHB1dC50eHRdXHUwMDFiW0tcclxuIl0KWzYuMzQwOTIyLCAibyIsICJcclxuIl0KWzYuNDcyMDI3LCAibyIsICItLS1cclxuIl0K'></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjI5LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDE4OSwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxNCAtLWlucHV0IGRhdGEvaW5wdXQ/LnR4dFxyXG4tLS1cclxuIl0KWzIuMTk1MjMxLCAibyIsICJOIEUgWCBUIEYgTCBPIFcgIH4gIHZlcnNpb24gMjAuMTAuMFxyXG4iXQpbMy4yNjk5NDgsICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBbZXh0cmF2YWdhbnRfc3RhbGxtYW5dIC0gcmV2aXNpb246IDRmZjA3Nzc2ZTBcclxuIl0KWzMuNzgxNjA1LCAibyIsICJcdTAwMWJbMzNtV0FSTjogRFNMIDIgSVMgQU4gRVhQRVJJTUVOVEFMIEZFQVRVUkUgVU5ERVIgREVWRUxPUE1FTlQgLS0gU1lOVEFYIE1BWSBDSEFOR0UgSU4gRlVUVVJFIFJFTEVBU0VcdTAwMWJbMzltXHUwMDFiW0tcclxuIl0KWzUuOTQwMDExLCAibyIsICJbLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDE0OnByb2Nlc3Nfc3RlcDE0IC1cdTAwMWJbS1xyXG4iXQpbNi4xNDUzNDIsICJvIiwgIlx1MDAxYlsyQVxyXG4iXQpbNi4xNDU3MzYsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcbiJdCls2LjE0NTk4MSwgIm8iLCAiWzQyLzIwNGYwYl0gcHJvY2VzcyA+IHN0ZXAxNDpwcm9jZXNzX3N0ZXAxNCAoMikgWyAgMCVdIDAgb2YgM1x1MDAxYltLXHJcbltpbnB1dDEsIDwuLi4+L3dvcmsvYTMvZGY3NTkyMzZjYjI5YTI5MDZhNTIxYzZhYTJkMmNhL291dHB1dC50eHRdXHUwMDFiW0tcclxuIl0KWzYuMzQ3NjQyLCAibyIsICJcdTAwMWJbNEFcclxuIl0KWzYuMzQ5NTU2LCAibyIsICJleGVjdXRvciA+ICBsb2NhbCAoMylcdTAwMWJbS1xyXG5bNDIvMjA0ZjBiXSBwcm9jZXNzID4gc3RlcDE0OnByb2Nlc3Nfc3RlcDE0ICgyKSBbMTAwJV0gMyBvZiAzIOKclFx1MDAxYltLXHJcbltpbnB1dDEsIDwuLi4+L3dvcmsvYTMvZGY3NTkyMzZjYjI5YTI5MDZhNTIxYzZhYTJkMmNhL291dHB1dC50eHRdXHUwMDFiW0tcclxuW2lucHV0MywgPC4uLj4vd29yay8yZS8zNWNkMDgyZWQ3MzUwY2NmMzg5NmRiNDE0MTIyMTEvb3V0cHV0LnR4dF1cdTAwMWJbS1xyXG5baW5wdXQyLCA8Li4uPi93b3JrLzQyLzIwNGYwYmFhM2FhMjk4YWY1Zjg2MDYwYzJiNWVmNi9vdXRwdXQudHh0XVx1MDAxYltLXHJcbiJdCls2LjQ3NTAwMywgIm8iLCAiXHJcbiJdCls2LjU2MDE3OSwgIm8iLCAiLS0tXHJcbiJdCg=='></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjM2LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDA0NCwgIm8iLCAiUnVubmluZzogY2F0IG91dHB1dC9vdXRwdXQudHh0XHJcbi0tLVxyXG4iXQpbMC4wMTI3NDcsICJvIiwgIjEyXHJcbiJdClswLjAxMjk3OSwgIm8iLCAiLS0tXHJcbiJdCg=='></asciinema-player>

- - -

## Step 15 - Make output files/paths unique

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=15 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjM3LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDkzNiwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxNSAtLWlucHV0IGRhdGEvaW5wdXQ/LnR4dFxyXG4tLS1cclxuIl0KWzIuMTY5Mzk1LCAibyIsICJOIEUgWCBUIEYgTCBPIFcgIH4gIHZlcnNpb24gMjAuMTAuMFxyXG4iXQpbMy4zMTk3ODUsICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBbc2xlZXB5X2JhZWtlbGFuZF0gLSByZXZpc2lvbjogNGZmMDc3NzZlMFxyXG4iXQpbMy44MjYyMTUsICJvIiwgIlx1MDAxYlszM21XQVJOOiBEU0wgMiBJUyBBTiBFWFBFUklNRU5UQUwgRkVBVFVSRSBVTkRFUiBERVZFTE9QTUVOVCAtLSBTWU5UQVggTUFZIENIQU5HRSBJTiBGVVRVUkUgUkVMRUFTRVx1MDAxYlszOW1cdTAwMWJbS1xyXG4iXQpbNi40MjUwMjksICJvIiwgIlstICAgICAgICBdIHByb2Nlc3MgPiBzdGVwMTU6cHJvY2Vzc19zdGVwMTUgLVx1MDAxYltLXHJcbiJdCls2LjYyNzIwMSwgIm8iLCAiXHUwMDFiWzJBXHJcbiJdCls2LjYyNzU2MSwgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDMpXHUwMDFiW0tcclxuIl0KWzYuNjI3NzkzLCAibyIsICJbNDkvN2E4ZWU5XSBwcm9jZXNzID4gc3RlcDE1OnByb2Nlc3Nfc3RlcDE1ICgyKSBbIDMzJV0gMSBvZiAzXHUwMDFiW0tcclxuW2lucHV0MiwgPC4uLj4vd29yay80OS83YThlZTlhMTA5ZTVkMzQ0ZGNlMDJlM2FhMDBmMmUvb3V0cHV0LnR4dF1cdTAwMWJbS1xyXG5baW5wdXQzLCA8Li4uPi93b3JrLzRhLzQwMzc1MmQ5ZDk5ZGRmZjZhZDMwMWI1MWYyNTMwNi9vdXRwdXQudHh0XVx1MDAxYltLXHJcbiJdCls2LjgzMzA2OCwgIm8iLCAiXHUwMDFiWzVBXHJcbiJdCls2LjgzNDk4NCwgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDMpXHUwMDFiW0tcclxuWzQ4LzRiYjg5OV0gcHJvY2VzcyA+IHN0ZXAxNTpwcm9jZXNzX3N0ZXAxNSAoMSkgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG5baW5wdXQyLCA8Li4uPi93b3JrLzQ5LzdhOGVlOWExMDllNWQzNDRkY2UwMmUzYWEwMGYyZS9vdXRwdXQudHh0XVx1MDAxYltLXHJcbltpbnB1dDMsIDwuLi4+L3dvcmsvNGEvNDAzNzUyZDlkOTlkZGZmNmFkMzAxYjUxZjI1MzA2L291dHB1dC50eHRdXHUwMDFiW0tcclxuW2lucHV0MSwgPC4uLj4vd29yay80OC80YmI4OTlhNzE4OGVhMjEwMjQ0MWE2YWRjYTNjYTQvb3V0cHV0LnR4dF1cdTAwMWJbS1xyXG4iXQpbNi45NjA1MDUsICJvIiwgIlxyXG4iXQpbNy4wOTUyMjEsICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjQ0LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDg1NCwgIm8iLCAiUnVubmluZzogY2F0IG91dHB1dC9pbnB1dDEvb3V0cHV0LnR4dCBvdXRwdXQvaW5wdXQyL291dHB1dC50eHQgb3V0cHV0L2lucHV0My9vdXRwdXQudHh0XHJcbi0tLVxyXG4iXQpbMC4wMTQxMTIsICJvIiwgIjExXHJcbiJdClswLjAxNDE2MiwgIm8iLCAiMTJcclxuMTNcclxuIl0KWzAuMDE0NDU5LCAibyIsICItLS1cclxuIl0K'></asciinema-player>

- - -

## Step 16 - Where to put `params`?

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjQ0LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMTYyOCwgIm8iLCAiUnVubmluZzogZ3JlcCBwYXJhbXMuaW5wdXQgbmV4dGZsb3cuY29uZmlnXHJcbi0tLVxyXG4iXQpbMC4wMTQ0NjUsICJvIiwgInBhcmFtcy5pbnB1dCA9IFwiJFBXRC9kYXRhL2lucHV0Py50eHRcIlxyXG4iXQpbMC4wMTQ3NTYsICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjQ1LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDAyMywgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxNVxyXG4tLS1cclxuIl0KWzIuMjE4MTcsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjI4NzU5NCwgIm8iLCAiTGF1bmNoaW5nIGAuL21haW4ubmZgIFthZ2l0YXRlZF9iYWJiYWdlXSAtIHJldmlzaW9uOiA0ZmYwNzc3NmUwXHJcbiJdClszLjgwNTg1NCwgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls1Ljk5NTQ2NCwgIm8iLCAiWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAxNTpwcm9jZXNzX3N0ZXAxNSAtXHUwMDFiW0tcclxuIl0KWzYuMTk5NTk4LCAibyIsICJcdTAwMWJbMkFcclxuIl0KWzYuMjAwMTIzLCAibyIsICJleGVjdXRvciA+ICBsb2NhbCAoMylcdTAwMWJbS1xyXG4iXQpbNi4yMDAzODMsICJvIiwgIlsxNi9mMTFiYTddIHByb2Nlc3MgPiBzdGVwMTU6cHJvY2Vzc19zdGVwMTUgKDIpIFsgMzMlXSAxIG9mIDNcdTAwMWJbS1xyXG5baW5wdXQyLCA8Li4uPi93b3JrLzE2L2YxMWJhNzM3ZTU0NzFlZWIyZjI1MWMwYTRhYTg4MS9vdXRwdXQudHh0XVx1MDAxYltLXHJcbltpbnB1dDMsIDwuLi4+L3dvcmsvMjAvMTgzZDRlZWU5YmU2NWQxNmE2MTdkNzM1ODc3MzZjL291dHB1dC50eHRdXHUwMDFiW0tcclxuIl0KWzYuNDA1Njk3LCAibyIsICJcdTAwMWJbNUFcclxuIl0KWzYuNDA3NjkyLCAibyIsICJleGVjdXRvciA+ICBsb2NhbCAoMylcdTAwMWJbS1xyXG5bODIvZTI5MTFjXSBwcm9jZXNzID4gc3RlcDE1OnByb2Nlc3Nfc3RlcDE1ICgxKSBbMTAwJV0gMyBvZiAzIOKclFx1MDAxYltLXHJcbltpbnB1dDIsIDwuLi4+L3dvcmsvMTYvZjExYmE3MzdlNTQ3MWVlYjJmMjUxYzBhNGFhODgxL291dHB1dC50eHRdXHUwMDFiW0tcclxuW2lucHV0MywgPC4uLj4vd29yay8yMC8xODNkNGVlZTliZTY1ZDE2YTYxN2Q3MzU4NzczNmMvb3V0cHV0LnR4dF1cdTAwMWJbS1xyXG5baW5wdXQxLCA8Li4uPi93b3JrLzgyL2UyOTExYzA5ODgyZTM2NzY1ZTkzNmRkMmZmYzgyNy9vdXRwdXQudHh0XVx1MDAxYltLXHJcbiJdCls2LjUyMzA3NywgIm8iLCAiXHJcbiJdCls2LjYzMjk0NCwgIm8iLCAiLS0tXHJcbiJdCg=='></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjUyLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDI5MiwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxNSAtLWlucHV0IGRhdGEvaW5wdXQxLnR4dFxyXG4tLS1cclxuIl0KWzIuMTg2ODg4LCAibyIsICJOIEUgWCBUIEYgTCBPIFcgIH4gIHZlcnNpb24gMjAuMTAuMFxyXG4iXQpbMy4yOTQzMTgsICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBbZmVydmVudF93aW5nXSAtIHJldmlzaW9uOiA0ZmYwNzc3NmUwXHJcbiJdClszLjc5NzI4OCwgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls2LjE2NTExMywgIm8iLCAiWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAxNTpwcm9jZXNzX3N0ZXAxNSBbICAwJV0gMCBvZiAxXHUwMDFiW0tcclxuIl0KWzYuMzY5MDk2LCAibyIsICJcdTAwMWJbMkFcclxuIl0KWzYuMzcxMjcsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgxKVx1MDAxYltLXHJcbiJdCls2LjM3MTQ4MiwgIm8iLCAiWzZiLzdjZmJhZl0gcHJvY2VzcyA+IHN0ZXAxNTpwcm9jZXNzX3N0ZXAxNSAoMSkgWzEwMCVdIDEgb2YgMSDinJRcdTAwMWJbS1xyXG5baW5wdXQxLCA8Li4uPi93b3JrLzZiLzdjZmJhZmQ1ZDY0MjlkY2JmZWYzYmFkMDFkOTY4OS9vdXRwdXQudHh0XVx1MDAxYltLXHJcbiJdCls2LjQ5NDc4NiwgIm8iLCAiXHJcbiJdCls2LjU4MjUwMSwgIm8iLCAiLS0tXHJcbiJdCg=='></asciinema-player>

- - -

## Step 17 - Add the output file to `params`

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=17 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjU4LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDIyNywgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxNyAtLWlucHV0IGRhdGEvaW5wdXQudHh0IC0tb3V0cHV0IG91dHB1dC50eHRcclxuLS0tXHJcbiJdClsyLjE5Mzg4OCwgIm8iLCAiTiBFIFggVCBGIEwgTyBXICB+ICB2ZXJzaW9uIDIwLjEwLjBcclxuIl0KWzMuMjc1NTc4LCAibyIsICJMYXVuY2hpbmcgYC4vbWFpbi5uZmAgW2Rlc3BlcmF0ZV9rZWxsZXJdIC0gcmV2aXNpb246IDRmZjA3Nzc2ZTBcclxuIl0KWzMuNzkzMzQxLCAibyIsICJcdTAwMWJbMzNtV0FSTjogRFNMIDIgSVMgQU4gRVhQRVJJTUVOVEFMIEZFQVRVUkUgVU5ERVIgREVWRUxPUE1FTlQgLS0gU1lOVEFYIE1BWSBDSEFOR0UgSU4gRlVUVVJFIFJFTEVBU0VcdTAwMWJbMzltXHUwMDFiW0tcclxuIl0KWzUuODMzOTc3LCAibyIsICJbLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDE3OnByb2Nlc3Nfc3RlcDE3IC1cdTAwMWJbS1xyXG4iXQpbNi4wNjIzOTcsICJvIiwgIlx1MDAxYlsyQVxyXG4iXQpbNi4wNjQwMSwgIm8iLCAiWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAxNzpwcm9jZXNzX3N0ZXAxNyBbICAwJV0gMCBvZiAxXHUwMDFiW0tcclxuIl0KWzYuMjY5MTE3LCAibyIsICJcdTAwMWJbMkFcclxuIl0KWzYuMjcxNDUxLCAibyIsICJleGVjdXRvciA+ICBsb2NhbCAoMSlcdTAwMWJbS1xyXG5bN2EvMzFmNjUzXSBwcm9jZXNzID4gc3RlcDE3OnByb2Nlc3Nfc3RlcDE3ICgxKSBbMTAwJV0gMSBvZiAxIOKclFx1MDAxYltLXHJcbiJdCls2LjI3MTY1NCwgIm8iLCAiW2lucHV0LCA8Li4uPi93b3JrLzdhLzMxZjY1MzQ2NTlmMGI2NzZmYmVkOTQxNzQzODJiZS9vdXRwdXQudHh0XVx1MDAxYltLXHJcbiJdCls2LjQwOTYzOSwgIm8iLCAiXHJcbiJdCls2LjU1NDU1OSwgIm8iLCAiLS0tXHJcbiJdCg=='></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjY1LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxNzEzOSwgIm8iLCAiUnVubmluZzogY2F0IG91dHB1dC9vdXRwdXQudHh0XHJcbi0tLVxyXG4iXQpbMC4wMTk2NzEsICJvIiwgIjExXHJcbiJdClswLjAxOTkxOCwgIm8iLCAiLS0tXHJcbiJdCg=='></asciinema-player>

- - -

## Step 18 - Add the output filename to the triplet

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=18 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjY2LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDQ4OSwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxOFxyXG4tLS1cclxuIl0KWzIuMTg5NTIyLCAibyIsICJOIEUgWCBUIEYgTCBPIFcgIH4gIHZlcnNpb24gMjAuMTAuMFxyXG4iXQpbMy4yODkxNjksICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBbY3JhenlfYWxsZW5dIC0gcmV2aXNpb246IDRmZjA3Nzc2ZTBcclxuIl0KWzMuODM5NDg3LCAibyIsICJcdTAwMWJbMzNtV0FSTjogRFNMIDIgSVMgQU4gRVhQRVJJTUVOVEFMIEZFQVRVUkUgVU5ERVIgREVWRUxPUE1FTlQgLS0gU1lOVEFYIE1BWSBDSEFOR0UgSU4gRlVUVVJFIFJFTEVBU0VcdTAwMWJbMzltXHUwMDFiW0tcclxuIl0KWzYuMDE5NDU0LCAibyIsICJbLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDE4OnByb2Nlc3Nfc3RlcDE4IC1cdTAwMWJbS1xyXG4iXQpbNi4yMjM5MDYsICJvIiwgIlx1MDAxYlsyQVxyXG4iXQpbNi4yMjQ1MTIsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcbiJdCls2LjIyNDg2LCAibyIsICJbOTQvNjkxN2MyXSBwcm9jZXNzID4gc3RlcDE4OnByb2Nlc3Nfc3RlcDE4ICgyKSBbIDMzJV0gMSBvZiAzXHUwMDFiW0tcclxuW2lucHV0MiwgPC4uLj4vd29yay85NC82OTE3YzJhYWM4MTA1NzY5OWU2ZWJhZTZjZjcyZjEvb3V0cHV0X2Zyb21faW5wdXQyLnR4dF1cdTAwMWJbS1xyXG5baW5wdXQxLCA8Li4uPi93b3JrLzA4LzMwMTg3N2U4ZWM4Yzg0MTYyMWIxODEwMDY3N2YyOS9vdXRwdXRfZnJvbV9pbnB1dDEudHh0XVx1MDAxYltLXHJcbiJdCls2LjQyOTU4OCwgIm8iLCAiXHUwMDFiWzVBXHJcbiJdCls2LjQzMTQ1MSwgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDMpXHUwMDFiW0tcclxuW2IwLzgyNTkxM10gcHJvY2VzcyA+IHN0ZXAxODpwcm9jZXNzX3N0ZXAxOCAoMykgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG5baW5wdXQyLCA8Li4uPi93b3JrLzk0LzY5MTdjMmFhYzgxMDU3Njk5ZTZlYmFlNmNmNzJmMS9vdXRwdXRfZnJvbV9pbnB1dDIudHh0XVx1MDAxYltLXHJcbltpbnB1dDEsIDwuLi4+L3dvcmsvMDgvMzAxODc3ZThlYzhjODQxNjIxYjE4MTAwNjc3ZjI5L291dHB1dF9mcm9tX2lucHV0MS50eHRdXHUwMDFiW0tcclxuW2lucHV0MywgPC4uLj4vd29yay9iMC84MjU5MTMwMWRjZTVlZTExZGI5NzFkMGU2MDY5OGIvb3V0cHV0X2Zyb21faW5wdXQzLnR4dF1cdTAwMWJbS1xyXG4iXQpbNi41NjY4OTYsICJvIiwgIlxyXG4iXQpbNi42NjgxOTEsICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -

## Step 19 - Use a closure

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=19 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjczLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDEzNiwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAxOVxyXG4tLS1cclxuIl0KWzIuMTc4MDc0LCAibyIsICJOIEUgWCBUIEYgTCBPIFcgIH4gIHZlcnNpb24gMjAuMTAuMFxyXG4iXQpbMy4yNjAyNjgsICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBbaW5zYW5lX2F2b2dhZHJvXSAtIHJldmlzaW9uOiA0ZmYwNzc3NmUwXHJcbiJdClszLjc3MTkxMiwgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls2LjE1MzQxNCwgIm8iLCAiWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAxOTpwcm9jZXNzX3N0ZXAxOSAtXHUwMDFiW0tcclxuIl0KWzYuMzU3ODQsICJvIiwgIlx1MDAxYlsyQVxyXG4iXQpbNi4zNjA0MjgsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcbiJdCls2LjM2MDY0OCwgIm8iLCAiWzU4Lzc2Yjc4ZV0gcHJvY2VzcyA+IHN0ZXAxOTpwcm9jZXNzX3N0ZXAxOSAoMikgWzEwMCVdIDMgb2YgMyDinJRcdTAwMWJbS1xyXG5baW5wdXQzLCA8Li4uPi93b3JrLzUwLzEyNzAxNzA0MTE2M2FjMzRiMjA2ZTQ5MmU0N2M1NC9pbnB1dDMtb3V0LnR4dF1cdTAwMWJbS1xyXG5baW5wdXQxLCA8Li4uPi93b3JrL2I4L2M2YTFkMDhkYzU4NmZhYWQ2ZmZiZjhiYzdkZGU1OC9pbnB1dDEtb3V0LnR4dF1cdTAwMWJbS1xyXG5baW5wdXQyLCA8Li4uPi93b3JrLzU4Lzc2Yjc4ZWVmMzQ4MmY0ZDljZmFkZjA3MWU2OWFkZi9pbnB1dDItb3V0LnR4dF1cdTAwMWJbS1xyXG4iXQpbNi41NjU4MjQsICJvIiwgIlx1MDAxYls2QVxyXG4iXQpbNi41NjYxMDIsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcbls1OC83NmI3OGVdIHByb2Nlc3MgPiBzdGVwMTk6cHJvY2Vzc19zdGVwMTkgKDIpIFsxMDAlXSAzIG9mIDMg4pyUXHUwMDFiW0tcclxuW2lucHV0MywgPC4uLj4vd29yay81MC8xMjcwMTcwNDExNjNhYzM0YjIwNmU0OTJlNDdjNTQvaW5wdXQzLW91dC50eHRdXHUwMDFiW0tcclxuW2lucHV0MSwgPC4uLj4vd29yay9iOC9jNmExZDA4ZGM1ODZmYWFkNmZmYmY4YmM3ZGRlNTgvaW5wdXQxLW91dC50eHRdXHUwMDFiW0tcclxuIl0KWzYuNTY2MTQ5LCAibyIsICJbaW5wdXQyLCA8Li4uPi93b3JrLzU4Lzc2Yjc4ZWVmMzQ4MmY0ZDljZmFkZjA3MWU2OWFkZi9pbnB1dDItb3V0LnR4dF1cdTAwMWJbS1xyXG4iXQpbNi42ODUzNTksICJvIiwgIlxyXG4iXQpbNi43OTcwODYsICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -

## Step 20 - The order of events in a stream

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=20a -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MjgwLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMTkxOSwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAyMGEgLXdpdGgtZG9ja2VyXHJcbi0tLVxyXG4iXQpbMi4yNTM2ODYsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjQwMzIyLCAibyIsICJMYXVuY2hpbmcgYC4vbWFpbi5uZmAgW2xldGhhbF9kaWprc3RyYV0gLSByZXZpc2lvbjogNGZmMDc3NzZlMFxyXG4iXQpbMy45MDQ5MywgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls2LjE5MjY1NSwgIm8iLCAiWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAyMGE6cHJvY2Vzc19zdGVwMTBhIC1cdTAwMWJbS1xyXG5bLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDIwYTpwcm9jZXNzX3N0ZXAyMCAgLVx1MDAxYltLXHJcbiJdCls2LjM5NzU2LCAibyIsICJcdTAwMWJbM0FcclxuIl0KWzYuNDAxODY4LCAibyIsICJleGVjdXRvciA+ICBsb2NhbCAoMylcdTAwMWJbS1xyXG4iXQpbNi40MDIxMjgsICJvIiwgIls0Zi83MTRiZThdIHByb2Nlc3MgPiBzdGVwMjBhOnByb2Nlc3Nfc3RlcDEwYSAoMSkgWzEwMCVdIDIgb2YgMiDinJRcdTAwMWJbS1xyXG5bMDEvZWNkNmNkXSBwcm9jZXNzID4gc3RlcDIwYTpwcm9jZXNzX3N0ZXAyMCAgICAgIFsgIDAlXSAwIG9mIDFcdTAwMWJbS1xyXG4iXQpbNi42MDU2NjgsICJvIiwgIlx1MDAxYls0QVxyXG4iXQpbNi42MDYxNDQsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcbls0Zi83MTRiZThdIHByb2Nlc3MgPiBzdGVwMjBhOnByb2Nlc3Nfc3RlcDEwYSAoMSkgWzEwMCVdIDIgb2YgMiDinJRcdTAwMWJbS1xyXG4iXQpbNi42MDY0MzUsICJvIiwgIlswMS9lY2Q2Y2RdIHByb2Nlc3MgPiBzdGVwMjBhOnByb2Nlc3Nfc3RlcDIwICAgICAgWzEwMCVdIDEgb2YgMSDinJRcdTAwMWJbS1xyXG5bc3VtLCAxLjA5MDkwOTA5MDldXHUwMDFiW0tcclxuIl0KWzYuNzU3NzUyLCAibyIsICJcclxuIl0KWzYuODcxNDkyLCAibyIsICItLS1cclxuIl0K'></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3Mjg3LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDUwNiwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAyMGEgLXdpdGgtZG9ja2VyXHJcbi0tLVxyXG4iXQpbMi4zMzk0OTEsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjQ4NTAzNCwgIm8iLCAiTGF1bmNoaW5nIGAuL21haW4ubmZgIFtzbWFsbF9zd2lybGVzXSAtIHJldmlzaW9uOiA0ZmYwNzc3NmUwXHJcbiJdCls0LjA2MjgzNiwgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls2LjMxNzg0NCwgIm8iLCAiWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAyMGE6cHJvY2Vzc19zdGVwMTBhIC1cdTAwMWJbS1xyXG5bLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDIwYTpwcm9jZXNzX3N0ZXAyMCAgLVx1MDAxYltLXHJcbiJdCls2LjUyMTgyNSwgIm8iLCAiXHUwMDFiWzNBXHJcbiJdCls2LjUyMjcxMiwgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDIpXHUwMDFiW0tcclxuIl0KWzYuNTIzMDIyLCAibyIsICJbMDkvZTdjNjNlXSBwcm9jZXNzID4gc3RlcDIwYTpwcm9jZXNzX3N0ZXAxMGEgKDIpIFsgIDAlXSAwIG9mIDJcdTAwMWJbS1xyXG5bLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDIwYTpwcm9jZXNzX3N0ZXAyMCAgICAgIC1cdTAwMWJbS1xyXG4iXQpbNi43MjgyNDksICJvIiwgIlx1MDAxYls0QVxyXG4iXQpbNi43MzA0MzEsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgzKVx1MDAxYltLXHJcblswOS9lN2M2M2VdIHByb2Nlc3MgPiBzdGVwMjBhOnByb2Nlc3Nfc3RlcDEwYSAoMikgWzEwMCVdIDIgb2YgMiDinJRcdTAwMWJbS1xyXG5bMWIvMTc0MzgxXSBwcm9jZXNzID4gc3RlcDIwYTpwcm9jZXNzX3N0ZXAyMCAgICAgIFsxMDAlXSAxIG9mIDEg4pyUXHUwMDFiW0tcclxuW3N1bSwgMC45MTY2NjY2NjY3XVx1MDAxYltLXHJcbiJdCls2Ljg2ODU4LCAibyIsICJcclxuIl0KWzYuOTcwNjcyLCAibyIsICItLS1cclxuIl0K'></asciinema-player>

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=20b -f ../scripts/extract_steps.awk ../main.nf
```

- - -

## Step 21 - Is the _triplet_ really necessary?

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=21 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3Mjk0LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMjk1OCwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAyMSAtd2l0aC1kb2NrZXJcclxuLS0tXHJcbiJdClsyLjIwNTcxMywgIm8iLCAiTiBFIFggVCBGIEwgTyBXICB+ICB2ZXJzaW9uIDIwLjEwLjAiXQpbMi4yMDU5NzYsICJvIiwgIlxyXG4iXQpbMy4yODQ1ODksICJvIiwgIkxhdW5jaGluZyBgLi9tYWluLm5mYCBbZnJpZW5kbHlfd2F0c29uXSAtIHJldmlzaW9uOiA0ZmYwNzc3NmUwXHJcbiJdClszLjc5NTA0MiwgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls2LjE3NDQxMSwgIm8iLCAiWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAyMTpwcm9jZXNzX3N0ZXAyMSAtXHUwMDFiW0tcclxuIl0KWzYuMzc4OTUxLCAibyIsICJcdTAwMWJbMkFcclxuIl0KWzYuMzgyMzQ2LCAibyIsICJleGVjdXRvciA+ICBsb2NhbCAoNClcdTAwMWJbS1xyXG4iXQpbNi4zODI2NTcsICJvIiwgIltiZi8yNjliMzNdIHByb2Nlc3MgPiBzdGVwMjE6cHJvY2Vzc19zdGVwMjEgKDQpIFsxMDAlXSA0IG9mIDQg4pyUXHUwMDFiW0tcclxuWzFhLCAyYiwgM2MsIDRkXVx1MDAxYltLXHJcbiJdCls2LjU4Njk2NiwgIm8iLCAiXHUwMDFiWzRBXHJcbiJdCls2LjU4NzMyNCwgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDQpXHUwMDFiW0tcclxuW2JmLzI2OWIzM10gcHJvY2VzcyA+IHN0ZXAyMTpwcm9jZXNzX3N0ZXAyMSAoNCkgWzEwMCVdIDQgb2YgNCDinJRcdTAwMWJbS1xyXG5bMWEsIDJiLCAzYywgNGRdXHUwMDFiW0tcclxuIl0KWzYuNzI0MTY2LCAibyIsICJcclxuIl0KWzYuODA2MzUzLCAibyIsICItLS1cclxuIl0K'></asciinema-player>

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=21a -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MzAxLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMTEyNiwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAyMWEgLXdpdGgtZG9ja2VyXHJcbi0tLVxyXG4iXQpbMi4yMzg3NTYsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjM0ODg5NSwgIm8iLCAiTGF1bmNoaW5nIGAuL21haW4ubmZgIFt0cnVzdGluZ19ydWJlbnNdIC0gcmV2aXNpb246IDRmZjA3Nzc2ZTBcclxuIl0KWzMuODU0NzEyLCAibyIsICJcdTAwMWJbMzNtV0FSTjogRFNMIDIgSVMgQU4gRVhQRVJJTUVOVEFMIEZFQVRVUkUgVU5ERVIgREVWRUxPUE1FTlQgLS0gU1lOVEFYIE1BWSBDSEFOR0UgSU4gRlVUVVJFIFJFTEVBU0VcdTAwMWJbMzltXHUwMDFiW0tcclxuIl0KWzYuMDI1Nzk2LCAibyIsICJbLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDIxYTphZGQgICAgICAgICAgICAtXHUwMDFiW0tcclxuWy0gICAgICAgIF0gcHJvY2VzcyA+IHN0ZXAyMWE6cHJvY2Vzc19zdGVwMjEgLVx1MDAxYltLXHJcbiJdCls2LjIyODgzOSwgIm8iLCAiXHUwMDFiWzNBXHJcbiJdCls2LjIzMTI2NywgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDkpXHUwMDFiW0tcclxuIl0KWzYuMjMxNTAyLCAibyIsICJbNGMvNDA0YTM1XSBwcm9jZXNzID4gc3RlcDIxYTphZGQgKDIpICAgICAgICAgICAgWzEwMCVdIDUgb2YgNSDinJRcdTAwMWJbS1xyXG5bMmIvMDU3ZGE2XSBwcm9jZXNzID4gc3RlcDIxYTpwcm9jZXNzX3N0ZXAyMSAoNCkgWzEwMCVdIDQgb2YgNCDinJRcdTAwMWJbS1xyXG4iXQpbNi40MzM4NjYsICJvIiwgIlx1MDAxYls0QVxyXG4iXQpbNi40MzQyODIsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICg5KVx1MDAxYltLXHJcbls0Yy80MDRhMzVdIHByb2Nlc3MgPiBzdGVwMjFhOmFkZCAoMikgICAgICAgICAgICBbMTAwJV0gNSBvZiA1IOKclFx1MDAxYltLXHJcbiJdCls2LjQzNDQ2NCwgIm8iLCAiWzJiLzA1N2RhNl0gcHJvY2VzcyA+IHN0ZXAyMWE6cHJvY2Vzc19zdGVwMjEgKDQpIFsxMDAlXSA0IG9mIDQg4pyUXHUwMDFiW0tcclxuWzJjLCA0YSwgNWQsIDZiXVx1MDAxYltLXHJcbiJdCls2LjU3NTMyNCwgIm8iLCAiXHJcbiJdCls2LjY4MjIwNywgIm8iLCAiLS0tXHJcbiJdCg=='></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MzA4LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDI2NiwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAyMWEgLXdpdGgtZG9ja2VyXHJcbi0tLVxyXG4iXQpbMi4xNzg2MDUsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjI2ODI5OCwgIm8iLCAiTGF1bmNoaW5nIGAuL21haW4ubmZgIFtmb2N1c2VkX3N0YWxsbWFuXSAtIHJldmlzaW9uOiA0ZmYwNzc3NmUwXHJcbiJdClszLjc5MzIsICJvIiwgIlx1MDAxYlszM21XQVJOOiBEU0wgMiBJUyBBTiBFWFBFUklNRU5UQUwgRkVBVFVSRSBVTkRFUiBERVZFTE9QTUVOVCAtLSBTWU5UQVggTUFZIENIQU5HRSBJTiBGVVRVUkUgUkVMRUFTRVx1MDAxYlszOW1cdTAwMWJbS1xyXG4iXQpbNS45OTU2MjQsICJvIiwgIlstICAgICAgICBdIHByb2Nlc3MgPiBzdGVwMjFhOmFkZCAgICAgICAgICAgIC1cdTAwMWJbS1xyXG5bLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDIxYTpwcm9jZXNzX3N0ZXAyMSAtXHUwMDFiW0tcclxuIl0KWzYuMjAxMDkzLCAibyIsICJcdTAwMWJbM0FcclxuIl0KWzYuMjA0MzcyLCAibyIsICJleGVjdXRvciA+ICBsb2NhbCAoOSlcdTAwMWJbS1xyXG4iXQpbNi4yMDQ3ODYsICJvIiwgIls0MS9mM2ViNTFdIHByb2Nlc3MgPiBzdGVwMjFhOmFkZCAoNCkgICAgICAgICAgICBbMTAwJV0gNSBvZiA1IOKclFx1MDAxYltLXHJcbls1Zi84ZmVkNTldIHByb2Nlc3MgPiBzdGVwMjFhOnByb2Nlc3Nfc3RlcDIxICg0KSBbMTAwJV0gNCBvZiA0IOKclFx1MDAxYltLXHJcblsyYiwgM2MsIDRhLCA2ZF1cdTAwMWJbS1xyXG4iXQpbNi4zNTg4NTQsICJvIiwgIlxyXG4iXQpbNi40NjkzNzgsICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -

## Step 22 - Toward generic processes

- - -


``` {sh eval=TRUE, echo=FALSE, results="asis"}
awk -v step=22 -f ../scripts/extract_steps.awk ../main.nf
```

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MzE1LCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDg5NiwgIm8iLCAiUnVubmluZzogbmV4dGZsb3cgcnVuIC4gLWVudHJ5IHN0ZXAyMiAtLWlucHV0IGRhdGEvaW5wdXQudHh0XHJcbi0tLVxyXG4iXQpbMi4xOTIyNDIsICJvIiwgIk4gRSBYIFQgRiBMIE8gVyAgfiAgdmVyc2lvbiAyMC4xMC4wXHJcbiJdClszLjI3NTAzLCAibyIsICJMYXVuY2hpbmcgYC4vbWFpbi5uZmAgW2NvbmZpZGVudF9jb3JpXSAtIHJldmlzaW9uOiA0ZmYwNzc3NmUwXHJcbiJdClszLjc3NDg4MywgIm8iLCAiXHUwMDFiWzMzbVdBUk46IERTTCAyIElTIEFOIEVYUEVSSU1FTlRBTCBGRUFUVVJFIFVOREVSIERFVkVMT1BNRU5UIC0tIFNZTlRBWCBNQVkgQ0hBTkdFIElOIEZVVFVSRSBSRUxFQVNFXHUwMDFiWzM5bVx1MDAxYltLXHJcbiJdCls1LjgzMDQ4LCAibyIsICJbLSAgICAgICAgXSBwcm9jZXNzID4gc3RlcDIyOnByb2Nlc3Nfc3RlcDIyIC1cdTAwMWJbS1xyXG4iXQpbNi4wMzQ4NjcsICJvIiwgIlx1MDAxYlsyQVxyXG4iXQpbNi4wMzUyNTcsICJvIiwgImV4ZWN1dG9yID4gIGxvY2FsICgxKVx1MDAxYltLXHJcbls0MC9lYjE1MDddIHByb2Nlc3MgPiBzdGVwMjI6cHJvY2Vzc19zdGVwMjIgKDEpIFsgIDAlXSAwIG9mIDFcdTAwMWJbS1xyXG4iXQpbNi4yNDAyMDIsICJvIiwgIlx1MDAxYlszQVxyXG4iXQpbNi4yNDI2NCwgIm8iLCAiZXhlY3V0b3IgPiAgbG9jYWwgKDEpXHUwMDFiW0tcclxuWzQwL2ViMTUwN10gcHJvY2VzcyA+IHN0ZXAyMjpwcm9jZXNzX3N0ZXAyMiAoMSkgWzEwMCVdIDEgb2YgMSDinJRcdTAwMWJbS1xyXG5baW5wdXQsIDwuLi4+L3dvcmsvNDAvZWIxNTA3YzQwNWRlZDBlZDBlYjUzZTlkOTQwZTk2L291dHB1dDIyLnR4dF1cdTAwMWJbS1xyXG4iXQpbNi4zNzIzMDEsICJvIiwgIlxyXG4iXQpbNi40ODc0NTgsICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -

<asciinema-player font-size='medium' preload='preload' src='data:application/json;base64,eyJ2ZXJzaW9uIjogMiwgIndpZHRoIjogMTM1LCAiaGVpZ2h0IjogMzEsICJ0aW1lc3RhbXAiOiAxNjA3OTM3MzIxLCAiZW52IjogeyJTSEVMTCI6ICIvYmluL3pzaCIsICJURVJNIjogInh0ZXJtLWNvbG9yIn19ClswLjAxMDY2NCwgIm8iLCAiUnVubmluZzogY2F0IG91dHB1dC9vdXRwdXQyMi50eHRcclxuLS0tXHJcbiJdClswLjAxMzM1MywgIm8iLCAiMVxyXG4iXQpbMC4wMTM1NzQsICJvIiwgIi0tLVxyXG4iXQo='></asciinema-player>

- - -


```groovy
params {
  ...
  cellranger {
    name = "cellranger"
    container = "mapping/cellranger:4.0.0-1"
    command = "cellranger"
    arguments {
      mode {
        name = "mode"
        otype = "--"
        description = "The run mode"
        value = "count"
        ...
      }
      input {
        name = "input"
        otype = "--"
        description = "Path of folder created by mkfastq or bcl2fastq"
        required = false
        ...
      }
      id {
        name = "id"
        otype = "--"
        description = "Output folder for the count files."
        value = "cr"
        required = false
        ...
      }
      ...
    }
    ...
  }
```

## Step 23 - More than one input

- - -


```groovy
[ "input": "<fastq-dir>", "reference": "<reference-dir>" ]
```

## Step 24 - `workflow` instead of `process`

- - -


```groovy
process cellranger_process {
  ...
  container "${params.dockerPrefix}${container}"
  publishDir "${params.output}/processed_data/${id}/", mode: 'copy', overwrite: true
  input:
    tuple val(id), path(input), val(output), val(container), val(cli)
  output:
    tuple val("${id}"), path("${output}")
  script:
    """
    export PATH="${moduleDir}:\$PATH"
    $cli
    """
}
```


```groovy
workflow cellranger {
  take:
    id_input_params_
  main:
    ...
    result_ =  ...
  emit:
    result_
}
```

